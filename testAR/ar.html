<!DOCTYPE html>
<html>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <body style="margin : 0px; overflow: hidden;">
      <div id="app" style='position: fixed; top: 10px; width:100%; text-align: center; z-index: 1;'>
        <button id="btn">Play Sound</button>
      </div>

      <a-scene test embedded arjs='sourceType: webcam; debugUIEnabled: false; patternRatio: 0.9;'>
     <!-- sound 1 -->
      <a-marker id="ar1" preset='costum' type='pattern' url='assets/star.patt'>
          <!-- we use cors proxy to avoid cross-origin problems ATTENTION! you need to set up your server -->
          <a-box position='0 0.5 0' material='opacity: 10;'soundhandler>
          </a-box>
      </a-marker>

<!-- sound 2 -->
      <a-marker id="ar2" preset='costum' type='pattern' url='assets/circle.patt'>
          <!-- we use cors proxy to avoid cross-origin problems ATTENTION! you need to set up your server -->
          <a-box position='0 0.5 0' material='opacity: 10;'soundhandler>
          </a-box>
      </a-marker>
      </a-scene>



    <script type="text/javascript">
const audio = new Audio("assets/noaudio.mp3");
const buttons = document.querySelectorAll("button");
const audio1 = new Audio("assets/audio1.mp3");
const audio2 = new Audio("assets/audio2.mp3");
var start = false;

buttons.forEach(button => {
  button.addEventListener("click", () => {
    button.style.display = 'none';
    audio1.play();
    start = true;
    console.log(start);
  });
});

AFRAME.registerComponent('test', {
tick: function () {
     if (document.querySelector('#ar1').object3D.visible == true) {
      if(start){
        // window.alert('AR1');
        audio1.play();
      }
    }
    else if (document.querySelector('#ar2').object3D.visible == true) {
       if(start){
       // window.alert('AR2');
       audio2.play();
      }
   }
    else {
      audio1.pause();
      audio1.currentTime = 0;
      audio2.pause();
      audio2.currentTime = 0;
    }
 }
});
</script>
</body>
</html>
